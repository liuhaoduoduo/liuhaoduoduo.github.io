---
layout: post
title:  "性能指标"
date:   2024-03-18 13:36:00 +0800
categories: pressure test
---
### 前言
在涉及到性能测试或压力测试时，经常能提及到诸如QPS、QPM、TPS、TPM、并发数、吞吐量和吞吐率等名词。今天阅读了一些相关资料，结合我自己的理解，将这些名词的含义、理解和使用场景总结在此。
### 通用概念
在QPS、QPM、TPS、TPM中，第二和第三个字母分别是英文Per（没）和second（秒）或Minute（分钟）的意思。
### 详细解释
#### QPS和QPM
这两个指标表示在单位时间内可以处理的查询数。在服务端接口相对逻辑相对简单条件的情况时（例如：获取商品价格接口）由于接口仅做一次查询操作，所以也可以用该指标适用于接口的压测。
  
#### TPS和TPM
这两个指标表示的是在单位时间内可以处理的事务数。这里的事务和数据库中的事务概念不太一样，数据库中的事务是事务中的所有步骤要么必须都之行，要么必须都不执行，决不允许出现某一步骤执行失败的情况。这里就没那么严苛的要求。不过有一点是肯定的，事务就代表了其中的逻辑不仅仅是一个步骤就能解决的。比如以下图的商品详情页为例：
![商品详情页](https://github.com/liuhaoduoduo/liuhaoduoduo.github.io/raw/main/images/240318130859.jpg)
完整的显示出这个商品详情页就可以视为一个事务。这个页面在实际应用中大概率不会是就通过一个接口就下发全部数据，而是由众多小接口来相互配合完成的。此时单独测任何一个接口的速度都不能代表整个页面的夹在速度。毕竟各个接口之间可能还有调用顺序依赖等问题。所以此时用QPS或QPM就不太合适了需要使用TPS或TPM，只有在完成一次全部数据的加载后才能算一次事务的完成（当然这其中根据情况是允许部分接口有失败的，在互联网环境中是允许当某一个接口在失能时下发兜底数据的）。  所以当被测试的目标是一个具非简单逻辑的页面或接口时适合使用TPS或TPM

#### RT
这个指标表示的是从发起清求到得到响应的时间。中间包括网络通信、内存 IO、磁盘 IO、数据库查询 IO 等时间合并而成。不能简单的根据此时间来评判接口实现的好与坏。
当然，如果时间采集是从服务端接受到请求开始，一直到返回结果之时，那么可以粗略的评估出接口实现的好与坏。不过也要注意，如果接口需要请求其他二方或三方服务时需要把这些请求服务的损耗考虑进去。

#### 并发数
这个指标表示的是系统可以同时处理的清求数量，在QPS或QPM（TPS或TPM）可以视为是一样的
  
#### 吞吐量和吞吐率
这两个指标描述的是某一个时间区间内能处理的操作数量。和其他指标不同的是，这两个指标通常描述的时间范围比较大。比如描述港口的吞吐量往往是年吞吐量，好像没有说每小时吞吐量的。吞吐率其实和吞吐量差不多，只不过在描述时往往会在时间前加一个“每”字，比如每年的吞吐率，会有一个单位时间的意思。


