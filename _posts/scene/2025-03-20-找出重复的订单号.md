---
layout: post
title:  "找出重复的订单号"
date:   2025-03-20 11:00:00 +0800
categories: scene
---
### 前言
这篇文章跟大家分享一道之前面试的时候遇到的面试题。原题目是这样，有两个保存有订单号的文本文件，每行一个订单号。这两个文件超级大，可能有数十个G，上亿甚至更多个订单号。单个文件内的订单号是不重复的，但两个文件间是会有重复的。问如何把这其中的重复订单号找出来。

### 当时的解题思路
我当时看到这道题的时候脑子里突然想到了之前非常经典的“小内存处理大文件问题”，我就和面试官阐述如何分块读取一种一个文件，然后到另一个文件中进行查找比对等等等。最终结果当然是我没有通过考核，这个答案并不是面试官所满意的。

### 面试官给出的思路
我随后请教了面试官，这道题他怎么做？他给我的答案是，选用哈希算法，遍历其中一个文件，将文件中的订单号分割到数个小文件（相对于原始文件来说小）中。然后遍历另外一个文件，还用同样的哈希算法找到来找到这个订单号可能会存在于的文件中，然后在这个小文件中来查看是否存在重复。

### 反思
听了面试官的解题思路以后我豁然开朗，懊悔自己失去了一次宝贵的面试机会。后来我反思了一下在这道题中我犯了哪些错误。
1. 首先是我误认为不能在占用更多的存储空间。这点是在今后面试的时候一定要补充问清楚的，面试官没有不能的东西不一定就是不行。像这道题，应该多问一句，可以创建其他文件吗？可以占用更多的磁盘空间吗？
2. 其次我主观的认为面试官会介意磁盘io次数过多的问题。像面试官那样解法，一定会导致更多的磁盘io次数。我当时误认为面试官同时会考核如何使用最少的io来解决问题。也是我没有主动询问的原因导致的。

综上所述，后续再面试的时候一定不要紧张，一定要把一些面试题中未提及的条件问清楚。
